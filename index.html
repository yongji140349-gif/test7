// =============================================
// Arduino Sensor Control Chatbot
// Ready for GitHub Deployment (Vite + React)
// =============================================
// à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰à¸‡à¸²à¸™:
// 1. à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¸„à¸”à¹‰à¸§à¸¢à¸„à¸³à¸ªà¸±à¹ˆà¸‡:
//    npm create vite@latest arduino-sensor-chatbot
//    à¹€à¸¥à¸·à¸­à¸ React
// 2. à¹à¸—à¸™à¸—à¸µà¹ˆà¹„à¸Ÿà¸¥à¹Œ src/App.jsx à¸”à¹‰à¸§à¸¢à¹‚à¸„à¹‰à¸”à¸™à¸µà¹‰
// 3. npm install
// 4. npm run dev
// 5. push à¸‚à¸¶à¹‰à¸™ GitHub à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ
// =============================================

import { useState } from "react";

export default function App() {
  const [input, setInput] = useState("");
  const [messages, setMessages] = useState([
    { role: "bot", text: "ğŸ¤– Arduino Sensor Assistant à¸à¸£à¹‰à¸­à¸¡à¸Šà¹ˆà¸§à¸¢à¸„à¸¸à¸“!\nà¸à¸´à¸¡à¸à¹Œà¸Šà¸·à¹ˆà¸­ Sensor à¹€à¸Šà¹ˆà¸™ DHT11, Ultrasonic, LDR, PIR" }
  ]);

  const generateResponse = (text) => {
    text = text.toLowerCase();

    if (text.includes("dht11")) {
      return `ğŸ“Œ DHT11 Temperature & Humidity Sensor

à¸à¸²à¸£à¸•à¹ˆà¸­à¸ªà¸²à¸¢:
VCC â†’ 5V
GND â†’ GND
DATA â†’ D2

à¹‚à¸„à¹‰à¸”à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:
#include <DHT.h>
#define DHTPIN 2
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);

void setup() {
  Serial.begin(9600);
  dht.begin();
}

void loop() {
  float t = dht.readTemperature();
  float h = dht.readHumidity();
  Serial.print("Temp: ");
  Serial.println(t);
  delay(2000);
}`;
    }

    if (text.includes("ultrasonic") || text.includes("hc-sr04")) {
      return `ğŸ“Œ Ultrasonic HC-SR04

Trig â†’ D9
Echo â†’ D10

#define trig 9
#define echo 10

void setup(){
  Serial.begin(9600);
  pinMode(trig, OUTPUT);
  pinMode(echo, INPUT);
}

void loop(){
  digitalWrite(trig, LOW);
  delayMicroseconds(2);
  digitalWrite(trig, HIGH);
  delayMicroseconds(10);
  digitalWrite(trig, LOW);

  long duration = pulseIn(echo, HIGH);
  float distance = duration * 0.034 / 2;

  Serial.println(distance);
  delay(500);
}`;
    }

    if (text.includes("ldr")) {
      return `ğŸ“Œ LDR Light Sensor

LDR â†’ A0

void setup(){
  Serial.begin(9600);
}

void loop(){
  int lightValue = analogRead(A0);
  Serial.println(lightValue);
  delay(500);
}`;
    }

    if (text.includes("pir")) {
      return `ğŸ“Œ PIR Motion Sensor

OUT â†’ D3

#define pir 3

void setup(){
  Serial.begin(9600);
  pinMode(pir, INPUT);
}

void loop(){
  int motion = digitalRead(pir);
  if(motion == HIGH){
    Serial.println("Motion Detected");
  }
  delay(500);
}`;
    }

    if (text.includes("soil")) {
      return `ğŸ“Œ Soil Moisture Sensor

Sensor â†’ A0

void setup(){
  Serial.begin(9600);
}

void loop(){
  int moisture = analogRead(A0);
  Serial.println(moisture);
  delay(1000);
}`;
    }

    return "â“ à¹„à¸¡à¹ˆà¸à¸š Sensor à¸™à¸µà¹‰\nà¸£à¸­à¸‡à¸£à¸±à¸š: DHT11, Ultrasonic, LDR, PIR, Soil";
  };

  const handleSend = () => {
    if (!input) return;

    const userMsg = { role: "user", text: input };
    const botMsg = { role: "bot", text: generateResponse(input) };

    setMessages([...messages, userMsg, botMsg]);
    setInput("");
  };

  return (
    <div style={{
      fontFamily: "Arial",
      background: "#f4f6f8",
      minHeight: "100vh",
      padding: "30px"
    }}>
      <div style={{
        maxWidth: "800px",
        margin: "auto",
        background: "white",
        padding: "20px",
        borderRadius: "15px",
        boxShadow: "0 10px 30px rgba(0,0,0,0.1)"
      }}>
        <h2>ğŸ¤– Arduino Sensor Control Chatbot</h2>

        <div style={{
          height: "400px",
          overflowY: "auto",
          border: "1px solid #ddd",
          padding: "10px",
          marginBottom: "15px",
          borderRadius: "10px",
          background: "#fafafa"
        }}>
          {messages.map((msg, index) => (
            <div key={index}
              style={{
                marginBottom: "10px",
                color: msg.role === "bot" ? "green" : "blue",
                whiteSpace: "pre-wrap"
              }}>
              {msg.role === "user" ? "ğŸ‘¤ " : "ğŸ¤– "}{msg.text}
            </div>
          ))}
        </div>

        <input
          style={{ width: "75%", padding: "8px" }}
          value={input}
          onChange={(e) => setInput(e.target.value)}
          placeholder="à¸à¸´à¸¡à¸à¹Œà¸Šà¸·à¹ˆà¸­ Sensor..."
        />
        <button
          onClick={handleSend}
          style={{ padding: "8px 15px", marginLeft: "10px" }}>
          à¸ªà¹ˆà¸‡
        </button>
      </div>
    </div>
  );
}
